---
title: "Starostne strukture po svetu"
author: "Mitja Mandić"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, echo=FALSE, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# O temi

Spreminjanje starostne strukture prebivalstva je zanje čase izjemno aktualna tema. V poročilu je predstavljeno nekaj podatkov o starostni sestavi držav po svetu. Vse države niso vključene, saj enostavno ni zbranih podatkov, pri temu pa gre za manjšino držav. Podatki pokrivajo leta med 1980 in 2015 na 5 let, saj se starostne strukture v roku enega leta ne spreminjajo bistveno.

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
source("uvoz/uvoz_podatkov.r", encoding="UTF-8")
```

Uvozili smo podatke o starostnih strukturah, populaciji in veroizpovedi v formatu CSV ter podatke o preteklih BDP-jih iz HTML tabel iz Wikipedie. Viri so natančno navedeni v "README.md".  
Podatke imamo v tabelah v obliki *tidy data*:


1. `StarostneStruktureCelota` - podatki starostni strukturi v državi
  - `Age_group` - spremenljivka: starostna skupina (urejen faktor),
  - `country` - spremenljivka: ime države (besedilo)
  - `year` - spremenljivka: leto, v katerem je bila popisana starostna struktura (število)
  - `number` - meritev: število pripadnikov starostne skupine

2. `religije` - podatki o verski strukturi posameznih držav
  - `country` - spremenljivka: ime države (besedilo),
  - `christians` - meritev: število kristjanov v državi (število),
  - `muslims` - meritev: število muslimanov v državi (število),
  - `unaffiliated` - meritev: število nevernikov (ateistov) v državi (število),
  - `hindus` - meritev: število hinduistov v državi (število),
  - `buddhists` - meritev: število budistov v državi (število),
  - `folkReligions` - meritev: število pripadikov neki lokalni veri v državi (število),
  - `other` - meritev: število pripadnikov drugim religijam v državi (število),
  - `jews` - meritev: število judov v državi (število).


# Medianska starost

Na spodnjem zemljevidu je prikazana medianska starost prebivalcev po svetu iz leta 2018 - starost, od katere je polovico prebivalstva mlajše, in polovico starejše. Najnižjo ima Niger, pri malo manj kot 15 letih, 
najvišjo pa Monako pri 53 letih. Slovenija je na lestvici precej visoko z mediansko starostjo 44.5 let. 

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE, results='hide', fig.align='center'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
zemljevid_median
```

# Spreminjanje starostne sestave

Svet se stara, sestava populacije se po svetu spreminja. Na grafu spodaj so predstavljeni deleži posameznih starostnih struktur v zadnjih 40 letih. Procenti se ponekod ne seštejejo v 100 - nekaj držav je podajalo samo podatke o številu prebivalcev, ne pa tudi o njihovih starostih.

```{r poLetih,plotly = TRUE,echo=FALSE, message=FALSE, warning=FALSE}
poLetih
```

# Starostne strukture in razvitost države

V interaktivnem grafu smo predstavili, kako se spreminjajo starostne strukture z BDPjem države, merjenim v PPP ter HDI - human development indeks. Sploh pri slednjem indikatorju opazimo močno korelacijo med višjim indeksom in večjim procentom starejše populacije.

```{r shiny, echo=FALSE}
shinyAppDir("shiny")
```




# Napredna analiza podatkov

```{r analiza, echo=FALSE, message=FALSE}
source("analiza/analiza.r", encoding="UTF-8")

```
